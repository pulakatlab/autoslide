# Mask Validation GUI

GUI tool for validating masks generated by the AutoSlide pipeline.

## Features

- **Three-panel display**: Original image, mask, and overlay side-by-side
- **Keyboard navigation**: Up/Down arrows to move through images
- **Quick validation**: Left arrow to drop mask, Right arrow to drop entire image set
- **Persistent state**: Validation results saved to JSON file
- **Auto-overlay generation**: Creates overlay with 0.3 alpha if not present

## Usage

### Command Line

```bash
# Point to a directory containing images
python autoslide/src/utils/mask_validation_gui.py /path/to/suggested_regions/SVS_NAME/SCENE_NAME

# Or run without arguments to get a directory picker
python autoslide/src/utils/mask_validation_gui.py
```

### Keyboard Shortcuts

- **Up Arrow**: Previous image
- **Down Arrow**: Next image
- **Left Arrow**: Drop/restore mask for current image
- **Right Arrow**: Drop/restore entire image set
- **S**: Save validation results
- **Q**: Quit (prompts to save if changes exist)

## Directory Structure

The GUI expects the standard AutoSlide pipeline structure:

```
directory/
├── images/
│   ├── image_001.png
│   ├── image_002.png
│   └── ...
├── masks/
│   ├── image_001_mask.png
│   ├── image_002_mask.png
│   └── ...
└── overlays/ (optional)
    ├── image_001_overlay.png
    ├── image_002_overlay.png
    └── ...
```

## Output

Validation results are saved to `validation_results.json` in the selected directory:

```json
{
  "dropped_masks": [
    "/path/to/image_001.png",
    "/path/to/image_003.png"
  ],
  "dropped_images": [
    "/path/to/image_005.png"
  ],
  "total_images": 50,
  "num_dropped_masks": 2,
  "num_dropped_images": 1
}
```

## Requirements

- Python 3.7+
- tkinter (usually included with Python)
- Pillow (PIL)
- numpy

All dependencies are included in the project's `requirements.txt`.
